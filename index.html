<!DOCTYPE html>

<!--
This is an HTML document. It contains information about how elements in the website
are arranged. In other words, it describes the layout of a website.

I can't wait to see the resumes you put together!

Cameron Pittman, Udacity Course Developer
-->

<!--
The <head> of a website generally links to important resources the page will
need to load. You'll see a lot of <link>s to CSS files for styles and
<scripts> for JavaScript files to build interactions.
-->
<head>
  <!-- This tells the browser how to read the document. -->
  <meta charset="utf-8">

  <!-- Tells the browser what the title of this page should be. -->
  <title>Resume - Reyes Herrera Jr</title>

  <!-- Load the page styles.
  <link href="css/style.css" rel="stylesheet" type="text/css">
  -->
  <!--
  jQuery is a common JavaScript library for reading and making changes to the
  Document Object Model (DOM). The DOM is a tree that contains information
  about what is actually visible on a website.

  While HTML is a static document, the browser converts HTML to the
  DOM and the DOM can change. In fact, JavaScript's power comes from
  its ability to manipulate the DOM, which is essentially a JavaScript
  object. When JavaScript makes something interesting happen on a
  website, it's likely the action happened because JavaScript changed
  the DOM. jQuery is fast and easy to use, but it doesn't do anything
  you can't accomplish with vanilla (regular) JavaScript.
  <script src="js/jQuery.js"></script>
  -->

  <!-- More on helper.js in the class -->

  <!--
  Uncomment the <script> tag below when you're ready to add an interactive
  Google Map to your resume!
  -->
  <!--
  <meta name="viewport" content="width=device-width">
  -->
  <!--
    the following was added for bootstrap
  -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

  <!-- build:css inline production/css/style.min.css -->
  <link href="css/style2.css" rel="stylesheet" type="text/css">
  <!-- /build -->

</head>
<body unresolved id="body2"> <!--
  <nav class="navbar navbar-inverse navbar-fixed-top navbar-custom">
    <div class="container-fluid">
      <div class="navbar-header">
        <p class="navbar-brand">REYES HERRERA JR / <small>FRONT-END WEB DEVELOPER</small></p>
      </div>
      <div>
        <ul class="nav navbar-nav pull-right">
          <li class="active"><a href="#">Top</a></li>
          <li><a href="#">Work Experience</a></li>
          <li><a href="#">Projects</a></li>
          <li><a href="#">Education</a></li>
          <li><a href="#">Map</a></li>
        </ul>
      </div>
    </div>
  </nav>
-->
  <nav role="navigation" class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
              <button type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
              </button>
              <h3 class="brand-logo brand-logo-top">
              REYES HERRERA JR</h3>
              <h3 class="brand-logo brand-slash"><small>/</small></h3>
              <h3 class="brand-logo brand-logo-bottom"><small>FRONT-END WEB DEVELOPER</small></h3>
          </div>
          <!-- Collection of nav links and other content for toggling -->
          <div id="navbarCollapse" class="collapse navbar-collapse">
              <ul class="nav navbar-nav navbar-right">
                  <li data-toggle="collapse" data-target=".navbar-collapse"><a href="#body2">Home</a></li>
                  <li data-toggle="collapse" data-target=".navbar-collapse"><a href="#header">Skills</a></li>
                  <li data-toggle="collapse" data-target=".navbar-collapse"><a href="#workExperience">Work Experience</a></li>
                  <li data-toggle="collapse" data-target=".navbar-collapse"><a href="#projects">Projects</a></li>
                  <li data-toggle="collapse" data-target=".navbar-collapse"><a href="#education">Education</a></li>
                  <li data-toggle="collapse" data-target=".navbar-collapse"><a href="#mapDiv">Map</a></li>
              </ul>
          </div>
      </div>
  </nav>
  <div class="jumbotron">
    <div class="container">
      <h1 id="bioMsg">Hello World</h1>
      <p>I'm originally from the Central Valley, I now reside in Silicon Valley.</p>
      <a class="btn btn-info btn-lg" href="mailto:reyesh@gmail.com?subject=We're interested in hiring you!" role="button">Hire Me!</a>
    </div>
  </div>
  <div id="main" class="container">
    <!--
    Everything from here to the <script> tag below is the skeleton of your
    website. Your code will add information to each of the sections of the
    resume below. You can pretty easily figure out what each section will
    display by looking at the id or at what's written between the <h2> tags.
    -->

    <div id="header" class="row well center-content clearfix">
      <ul id="topContacts" class='flex-box list-inline'></ul>
    </div>
    <div style='clear: both;'></div>
    <div id="workExperience" class='row well gray'>
      <h2>Work Experience</h2>
    </div>
    <div id="projects" class="row well">
      <h2>Projects</h2>
    </div>
    <div id="education" class='row well gray'>
      <h2>Education</h2>
    </div>
    <div id="activities" class='row well gray'>
      <h2>Activities</h2>
    </div>
    <div id="mapDiv" class='row well'>
      <h2>Where I've Lived and Worked</h2>
    </div>
    <div id="letsConnect" class='row well dark-gray'>
      <h2 class='orange center-text'>Let's Connect</h2>
        <ul id="footerContacts" class="flex-box text-center">
      </ul>
    </div>
  </div>
<!--
  <script src="production/js/resumeProd.min.js"></script>
-->

  <script type="text/javascript">

  function mapsResume(){
    console.log("in mapsResume function");
    /*
    This is the fun part. Here's where we generate the custom Google Map for the website.
    See the documentation below for more details.
    https://developers.google.com/maps/documentation/javascript/reference
    */
    var map;    // declares a global map variable


    /*
    Start here! initializeMap() is called when page is loaded.
    */
    function initializeMap() {

      var locations;
      var locationsObj;

      var mapOptions = {
        disableDefaultUI: true
      };

      // This next line makes `map` a new Google Map JavaScript Object and attaches it to
      // <div id="map">, which is appended as part of an exercise late in the course.
      map = new google.maps.Map(document.querySelector('#map'), mapOptions);
      // make the map undraggable
      console.log("selected #map!");
      map.setOptions({draggable: false, zoomControl: false, scrollwheel: false, disableDoubleClickZoom: true});


      /*
      locationFinder() returns an array of every location string from the JSONs
      written for bio, education, and work.
      */
      function locationFinder() {

        // initializes an empty array
        var locations = [];

        // adds the single location property from bio to the locations array
        locations.push(bio.contacts.location);

        // iterates through school locations and appends each location to
        // the locations array
        for (var school in education.schools) {
          locations.push(education.schools[school].location);
        }

        // iterates through work locations and appends each location to
        // the locations array
        for (var job in work.jobs) {
          locations.push(work.jobs[job].location);
        }

        return locations;
      }

      function locationFinderObj() {

        // initializes an empty object
        var locations = {};

        // initializes empty arrays
        locations.bio = [];
        locations.schools = [];
        locations.jobs = [];

        // puts my current location into the bio object
        locations.bio[0] = { "location":bio.contacts.location,
                             "name": "Currently Live Here"};

        // iterates through school and added the location plus name of school
        // to the schools object

        for(var i=0;i<education.schools.length;i++){
          locations.schools[i]={"name":education.schools[i].name,
                               "location":education.schools[i].location};
        }

        // iterates through jobs and added the location plus employer's name
        // to the jobs object

        for(var i=0;i<work.jobs.length;i++){
          locations.jobs[i] = {"name":work.jobs[i].employer,
                               "location":work.jobs[i].location};
        }

        return locations;
      }

      /*
      createMapMarker(placeData) reads Google Places search results to create map pins.
      placeData is the object returned from search results containing information
      about a single location.
      */
      function createMapMarker(placeData) {
        // The next lines save location data from the search result object to local variables
        var lat = placeData.geometry.location.lat();  // latitude from the place service
        var lng = placeData.geometry.location.lng();  // longitude from the place service
        var name = placeData.formatted_address;   // name of the place from the place service
        var bounds = window.mapBounds;            // current boundaries of the map window
        // marker is an object with additional data about the pin for a single location
        var marker = new google.maps.Marker({
          map: map,
          position: placeData.geometry.location,
          title: name
        });

        // infoWindows are the little helper windows that open when you click
        // or hover over a pin on a map. They usually contain more information
        // about a location.
        var name2 = getName(lat,lng);

        var infoWindow = new google.maps.InfoWindow({
          content: "<h3>" +name2+"</h3></br>" + name
        });

        // hmmmm, I wonder what this is about...
        google.maps.event.addListener(marker, 'click', function() {
          // your code goes here!
          infoWindow.open(map,marker);
        });

        // this is where the pin actually gets added to the map.
        // bounds.extend() takes in a map location object
        bounds.extend(new google.maps.LatLng(lat, lng));
        // fit the map to the new marker
        map.fitBounds(bounds);
        // center the map
        map.setCenter(bounds.getCenter());
      }
      function getName (lat, lng){

        for (var objects in locationsObj) {
            for (var place in locationsObj[objects]) {
                  if(locationsObj[objects][place].lat==lat && locationsObj[objects][place].lng==lng){
                    return locationsObj[objects][place].name;
                  }
              }
        }

      }
      /*
      callback(results, status) makes sure the search returned results for a location.
      If so, it creates a new map marker for that location.
      */
      function callback(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {

          for (var objects in locationsObj) {
              for (var place in locationsObj[objects]) {
                console.log(locationsObj[objects][place].location.replace(/\+/g, " ") + " " + results[0].formatted_address);

                    if(locationsObj[objects][place].location.replace(/\+/g, " ")==results[0].formatted_address){
                       locationsObj[objects][place].lat = results[0].geometry.location.lat();
                       locationsObj[objects][place].lng = results[0].geometry.location.lng();
                    }
                }
          }
          console.log(locationsObj);
          createMapMarker(results[0]);
        }
      }

      /*
      pinPoster(locations) takes in the array of locations created by locationFinder()
      and fires off Google place searches for each location
      */
      function pinPoster(locations) {

        // creates a Google place search service object. PlacesService does the work of
        // actually searching for location data.
        var service = new google.maps.places.PlacesService(map);

        // Iterates through the array of locations, creates a search object for each location
        for (var place in locations) {

          // the search request object
          var request = {
            query: locations[place]
          };

          // Actually searches the Google Maps API for location data and runs the callback
          // function with the search results after each search.
          service.textSearch(request, callback);
        }
      }

      function pinPosterObj(locations) {

        // creates a Google place search service object. PlacesService does the work of
        // actually searching for location data.
        var service = new google.maps.places.PlacesService(map);

        // Iterates through the array of locations, creates a search object for each location
        for (objects in locations) {
            for (place in locations[objects]) {
              // the search request object
              var request = {
                query: locations[objects][place].location
              };
              // Actually searches the Google Maps API for location data and runs the callback
              // function with the search results after each search.
              service.textSearch(request, callback);

            }
        }
      }


      // Sets the boundaries of the map based on pin locations
      window.mapBounds = new google.maps.LatLngBounds();

      // locations is an array of location strings returned from locationFinder()
      locations = locationFinder();
      locationsObj = locationFinderObj();
      pinPosterObj(locationsObj);

      // pinPoster(locations) creates pins on the map for each location in
      // the locations array
    //  pinPoster(locations);

    }

    /*
    Uncomment the code below when you're ready to implement a Google Map!
    */

    // Calls the initializeMap() function when the page loads
    // window.addEventListener('load', initializeMap);
    initializeMap();
    // Vanilla JS way to listen for resizing of the window
    // and adjust map bounds
    window.addEventListener('resize', function(e) {
      // Make sure the map bounds get updated on page resize
      map.fitBounds(mapBounds);
    });
  };

  </script>
  <!--
  The next line tells the browser where to download the JavaScript file you'll be
  writing. In resumeBuilder.js, you'll be writing code that builds the resume
  dynamically when this website, index.html, is opened.
  -->

  <!-- build:js js/resumeProd.min.js
  <script type="text/javascript" src="js/helper.js"></script>
  <script type="text/javascript" src="js/resumeBuilder.js"></script>
  /build -->
  <!--
  <script src="http://maps.googleapis.com/maps/api/js?libraries=places&callback=mapsResume" async></script>
  -->

  <!--
  These scripts are written in JavaScript. You'll be breaking them down as part of
  a quiz. Essentially, the next few lines are checking to see if you have not
  changed each section of the resume. If you have not made any changes to a section
  of the resume, then that part of the resume does not show up. More on this in the
  course.
  -->

  <script type="text/javascript">

    /*
    // Notice how all of a sudden there's JavaScript inside this HTML
    // document? You can write JavaScript between <script> tags. At the end of your
    // JavaScript, don't forget the closing script tag with the slash (/).


    // Also, this is a JavaScript style comment. You can comment in JavaScript with:

    //   two slashes for all following characters on a single line, or

        an opening and closing set of slash asterisks for block comments.
    */


    if(document.getElementsByClassName('flex-item').length === 0) {
      //document.getElementById('topContacts').style.display = 'none';
      document.getElementById('topContacts').style.backgroundcolor = 'black';
    }
    if(document.getElementsByTagName('h1').length === 0) {
      //document.getElementById('header').style.display = 'none';
      document.getElementById('header').style.backgroundcolor = 'black';
    }
    if(document.getElementsByClassName('work-entry').length === 0) {
      document.getElementById('workExperience').style.backgroundcolor = 'black';
    }
    if(document.getElementsByClassName('project-entry').length === 0) {
    //  document.getElementById('projects').style.display = 'none';
      document.getElementById('projects').style.backgroundcolor = 'black';
    }
    if(document.getElementsByClassName('education-entry').length === 0) {
    //  document.getElementById('education').style.display = 'none';
      document.getElementById('education').style.backgroundcolor = 'black';
    }
    if(document.getElementsByClassName('flex-item').length === 0) {
      //document.getElementById('letsConnect').style.display = 'none';
      document.getElementById('letsConnect').style.backgroundcolor = 'black';
    }
    if(document.getElementById('map') === null) {
      //document.getElementById('mapDiv').style.display = 'none';
      document.getElementById('mapDiv').style.backgroundcolor = 'black';
    }

    var cb = function() {
      var l = document.createElement('link'); l.rel = 'stylesheet';
      l.href = 'http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css';
      var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h);
    };
    var raf = requestAnimationFrame || mozRequestAnimationFrame ||
        webkitRequestAnimationFrame || msRequestAnimationFrame;
    if (raf) raf(cb);
    else window.addEventListener('load', cb);


    function downloadJSAtOnload() {

      // the following would not work becuase jquery is needed before bootstrap loads

      // var element = document.createElement("script");
      // element.src = "https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js";
      // document.body.appendChild(element);

      var element2 = document.createElement("script");
      element2.src = "js/resumeProd.min.js";
      document.body.appendChild(element2);

      var element3 = document.createElement("script");
      element3.setAttribute("async","");
      element3.src = "http://maps.googleapis.com/maps/api/js?libraries=places&callback=mapsResume";
      document.body.appendChild(element3);

    }

    if (window.addEventListener)
      window.addEventListener("load", downloadJSAtOnload, false);
    else if (window.attachEvent)
      window.attachEvent("onload", downloadJSAtOnload);
    else window.onload = downloadJSAtOnload;

  </script>

  <!-- end of html body -->
  <!-- Modal -->

</body>
</html>
